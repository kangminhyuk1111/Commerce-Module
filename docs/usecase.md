# 유스케이스 정의서 (v1.0)

## 📱 상품 관련

### **상품 목록 조회**
**[유저 스토리]**
* 사용자는 상품 목록을 조회할 수 있다.
* 상품 ID, 이름, 가격, 재고가 조회 된다.

**[실패 케이스]**
* 목록 조회가 실패하면 오류를 반환한다.

---

### **상품 상세 조회**
**[유저 스토리]**
* 사용자는 상품 상세를 조회할 수 있다.
* 상품 ID, 이름, 가격, 재고가 조회 된다.

**[실패 케이스]**
* 상품이 존재하지 않으면 오류를 반환한다.
* 상품 조회가 실패하면 오류를 반환한다.

---

## 👤 사용자 관련

### **회원가입**
**[유저 스토리]**
* 사용자는 이름, 이메일, 비밀번호로 회원가입할 수 있다.
* 회원가입 완료 시 포인트 계정이 자동으로 생성된다 (잔액 0).

**[실패 케이스]**
* 이미 존재하는 이메일이면 오류를 반환한다.
* 필수 정보가 누락되면 오류를 반환한다.
* 회원가입에 실패하면 오류를 반환한다.

---

### **로그인**
**[유저 스토리]**
* 사용자는 이메일과 비밀번호로 로그인할 수 있다.
* 로그인 성공 시 사용자 정보를 반환한다.

**[실패 케이스]**
* 존재하지 않는 이메일이면 오류를 반환한다.
* 비밀번호가 틀리면 오류를 반환한다.
* 로그인에 실패하면 오류를 반환한다.

---

## 💰 포인트 관련

### **포인트 조회**
**[유저 스토리]**
* 사용자는 본인의 포인트 잔액을 조회할 수 있다.
* 포인트 잔액과 마지막 업데이트 시간이 조회된다.

**[실패 케이스]**
* 로그인하지 않은 사용자가 조회하면 오류를 반환한다.
* 포인트 계정이 존재하지 않으면 오류를 반환한다.
* 포인트 조회가 실패하면 오류를 반환한다.

---

### **포인트 충전**
**[유저 스토리]**
* 사용자는 포인트를 충전할 수 있다.
* 충전된 포인트가 기존 잔액에 추가된다.
* 충전 후 최종 잔액이 반환된다.

**[실패 케이스]**
* 로그인하지 않은 사용자가 충전하면 오류를 반환한다.
* 충전 금액이 0 이하이면 오류를 반환한다.
* 포인트 충전에 실패하면 오류를 반환한다.

---

## 🛒 주문 관련

### **주문 생성**
**[유저 스토리]**
* 사용자는 상품을 주문할 수 있다.
* 주문 시 각 상품의 재고가 차감된다.
* 주문 시 총 금액만큼 포인트가 차감된다.
* 주문 완료 시 주문 정보가 반환된다.
* 한 번에 여러 상품을 주문할 수 있다.

**[실패 케이스]**
* 로그인하지 않은 사용자가 주문하면 오류를 반환한다.
* 주문하고자 하는 상품이 존재하지 않으면 오류를 반환한다.
* 주문하고자 하는 상품의 재고가 주문 수량보다 부족하면 오류를 반환한다.
* 사용자의 포인트가 주문 총액보다 부족하면 오류를 반환한다.
* 주문 생성에 실패하면 오류를 반환한다.

---

### **주문 조회**
**[유저 스토리]**
* 사용자는 본인의 주문 목록을 조회할 수 있다.
* 주문 ID, 총 가격, 주문 상태, 주문 일시가 조회된다.
* 특정 주문의 상세 정보를 조회할 수 있다.
* 주문 상세에는 주문한 상품들의 정보가 포함된다.

**[실패 케이스]**
* 로그인하지 않은 사용자가 조회하면 오류를 반환한다.
* 존재하지 않는 주문을 조회하면 오류를 반환한다.
* 다른 사용자의 주문을 조회하면 오류를 반환한다.
* 주문 조회에 실패하면 오류를 반환한다.

---

### **주문 취소**
**[유저 스토리]**
* 사용자는 PENDING 상태의 주문을 취소할 수 있다.
* 주문 취소 시 사용된 포인트가 환불된다.
* 주문 취소 시 차감된 재고가 복원된다.
* 주문 상태가 CANCELLED로 변경된다.

**[실패 케이스]**
* 로그인하지 않은 사용자가 취소하면 오류를 반환한다.
* 존재하지 않는 주문을 취소하면 오류를 반환한다.
* 다른 사용자의 주문을 취소하면 오류를 반환한다.
* PENDING 상태가 아닌 주문을 취소하면 오류를 반환한다.
* 주문 취소에 실패하면 오류를 반환한다.

---

## 🔧 관리자 관련

### **상품 등록**
**[유저 스토리]**
* 관리자는 새로운 상품을 등록할 수 있다.
* 상품명, 가격, 초기 재고를 입력하여 등록한다.

**[실패 케이스]**
* 관리자 권한이 없으면 오류를 반환한다.
* 필수 정보가 누락되면 오류를 반환한다.
* 상품 등록에 실패하면 오류를 반환한다.

---

### **상품 수정**
**[유저 스토리]**
* 관리자는 기존 상품 정보를 수정할 수 있다.
* 상품명, 가격, 재고를 수정할 수 있다.

**[실패 케이스]**
* 관리자 권한이 없으면 오류를 반환한다.
* 존재하지 않는 상품을 수정하면 오류를 반환한다.
* 필수 정보가 누락되면 오류를 반환한다.
* 상품 수정에 실패하면 오류를 반환한다.

---

### **재고 관리**
**[유저 스토리]**
* 관리자는 상품의 재고를 조회할 수 있다.
* 관리자는 상품의 재고를 증가시킬 수 있다.

**[실패 케이스]**
* 관리자 권한이 없으면 오류를 반환한다.
* 존재하지 않는 상품의 재고를 관리하면 오류를 반환한다.
* 재고 관리에 실패하면 오류를 반환한다.

---

## 📋 주요 비즈니스 플로우

### **일반 사용자 주문 플로우**
1. 회원가입 → 포인트 계정 생성 (0원)
2. 포인트 충전
3. 상품 목록 조회
4. 주문 생성 → 재고 차감 + 포인트 차감
5. 주문 조회 (선택적)
6. 주문 취소 (선택적) → 재고 복원 + 포인트 환불

### **관리자 상품 관리 플로우**
1. 상품 등록
2. 상품 정보 수정
3. 재고 관리 (재고 보충)
4. 주문 현황 모니터링